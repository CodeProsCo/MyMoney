@using MyMoney.Resources
@model IList<MyMoney.ViewModels.Saving.Goal.GoalViewModel>
@{
    ViewBag.Title = Goal.Title_ManageGoals;
    var inProgress = Model.Where(x => !x.Complete).ToList();
    var complete = Model.Where(x => x.Complete).ToList();
}

<div class="ui grid" id="main-grid">
    <div class="twelve wide column">
        <div class="ui styled segment">
            <h4 class="ui block header">
                <i class="flag icon"></i>
                @Goal.Header_CurrentGoals
            </h4>
            <div class="ui divided items">
                @foreach (var goal in inProgress)
                {
                    <div class="item">
                        <div class="content">
                            <span class="header">@goal.Name</span>
                            <div class="ui right floated red icon button"
                                 data-inverted
                                 data-tooltip="@Goal.Tooltip_Delete"
                                 data-url="@Url.Action("Delete", "Goal", new { goalId = goal.Id })">
                                <i class="trash icon"></i>
                            </div>
                            <div class="ui right floated yellow icon button"
                                 data-inverted
                                 data-tooltip="@Goal.Tooltip_Edit"
                                 data-url="@Url.Action("Edit", "Goal")">
                                <i class="pencil icon"></i>
                            </div>
                            <div class="meta">
                                @goal.StartDate.ToShortDateString()

                                @if (goal.EndDate.HasValue)
                                {
                                    @("- ")
                                    @goal.EndDate.Value.ToShortDateString()
                                }
                            </div>
                            <div class="description">
                                <div class="ui success progress" data-percent="@goal.Amount">
                                    <div class="bar">
                                        <div class="progress"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }

                @if (!inProgress.Any())
                {
                    <span>
                        You have no current goals
                    </span>
                }
            </div>
        </div>
        <div class="ui styled segment">
            <h4 class="ui block header">
                <i class="check icon"></i>
                @Goal.Header_CompletedGoals
            </h4>
            <div class="ui divided items">
                @foreach (var goal in complete)
                {
                    <div class="item">
                        <div class="content">
                            <span class="header">@goal.Name</span>
                            <div class="meta">
                                @goal.StartDate.ToShortDateString()

                                @if (goal.EndDate.HasValue)
                                {
                                    @("- ")
                                    @goal.EndDate.Value.ToShortDateString()
                                }
                            </div>
                            <div class="description">
                                <div class="ui progress success" data-percent="100">
                                    <div class="bar">
                                        <div class="progress"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
    <div class="four wide column">
        <div class="ui styled segment">
            <h4 class="ui block header">
                <i class="flag outline icon"></i>
                @Goal.Header_YourGoals
            </h4>
        </div>
    </div>
</div>
